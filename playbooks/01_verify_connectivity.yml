---
- name: Test connectivity to all network devices
  hosts: all
  gather_facts: false

  tasks:
    - name: Verify device is reachable
      ios_command:
        commands:
          - show version
      register: result
      ignore_errors: true

    - name: Display connectivity result
      debug:
        msg: >
          Device {{ inventory_hostname }} is reachable. Output: {{ result.stdout[0] }}
      when: result is defined and result.stdout is defined
